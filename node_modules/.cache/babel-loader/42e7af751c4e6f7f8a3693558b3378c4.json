{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/zaryo/OneDrive/Desktop/RSAutoParts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\zaryo\\\\OneDrive\\\\Desktop\\\\RSAutoParts\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{uiActions}from'./ui-slice';import{cartActions}from'./cart-slice';export var fetchCartData=function fetchCartData(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var fetchData,cartData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://react-http2-d8099-default-rtdb.firebaseio.com/cart.json');case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error('Could not fetch cart data!');case 5:_context.next=7;return response.json();case 7:data=_context.sent;return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();_context2.prev=1;_context2.next=4;return fetchData();case 4:cartData=_context2.sent;dispatch(cartActions.replaceCart({items:cartData.items||[],totalQuantity:cartData.totalQuantity}));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(uiActions.showNotification({status:'error',title:'Error!',message:'Fetching cart data failed!'}));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var sendCartData=function sendCartData(cart){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var sendRequest;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(uiActions.showNotification({status:'pending',title:'Sending...',message:'Sending cart data!'}));sendRequest=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('https://react-http2-d8099-default-rtdb.firebaseio.com/cart.json',{method:'PUT',body:JSON.stringify({items:cart.items,totalQuantity:cart.totalQuantity})});case 2:response=_context3.sent;if(response.ok){_context3.next=5;break;}throw new Error('Sending cart data failed.');case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function sendRequest(){return _ref4.apply(this,arguments);};}();_context4.prev=2;_context4.next=5;return sendRequest();case 5:dispatch(uiActions.showNotification({status:'success',title:'Success!',message:'Sent cart data successfully'}));_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](2);dispatch(uiActions.showNotification({status:'error',title:'Error!',message:'Senting cart data failed!'}));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[2,8]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/zaryo/OneDrive/Desktop/RSAutoParts/src/store/cart-actions.js"],"names":["uiActions","cartActions","fetchCartData","dispatch","fetchData","fetch","response","ok","Error","json","data","cartData","replaceCart","items","totalQuantity","showNotification","status","title","message","sendCartData","cart","sendRequest","method","body","JSON","stringify"],"mappings":"+QAAA,OAASA,SAAT,KAA0B,YAA1B,CACA,OAASC,WAAT,KAA4B,cAA5B,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACjC,+FAAO,kBAAOC,QAAP,6IACCC,SADD,2FACa,2KACOC,CAAAA,KAAK,CAC1B,iEAD0B,CADZ,QACVC,QADU,kBAKXA,QAAQ,CAACC,EALE,8BAMR,IAAIC,CAAAA,KAAJ,CAAU,4BAAV,CANQ,8BASGF,CAAAA,QAAQ,CAACG,IAAT,EATH,QASVC,IATU,+CAWTA,IAXS,wDADb,kBACCN,CAAAA,SADD,oFAgBoBA,CAAAA,SAAS,EAhB7B,QAgBGO,QAhBH,gBAiBDR,QAAQ,CAACF,WAAW,CAACW,WAAZ,CAAwB,CAC7BC,KAAK,CAAEF,QAAQ,CAACE,KAAT,EAAkB,EADI,CAE7BC,aAAa,CAAEH,QAAQ,CAACG,aAFK,CAAxB,CAAD,CAAR,CAjBC,mFAsBHX,QAAQ,CACNH,SAAS,CAACe,gBAAV,CAA2B,CACzBC,MAAM,CAAE,OADiB,CAEzBC,KAAK,CAAE,QAFkB,CAGzBC,OAAO,CAAE,4BAHgB,CAA3B,CADM,CAAR,CAtBG,sEAAP,+DA+BD,CAhCM,CAkCP,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAU,CACpC,gGAAO,kBAAOjB,QAAP,sIACLA,QAAQ,CACNH,SAAS,CAACe,gBAAV,CAA2B,CACzBC,MAAM,CAAE,SADiB,CAEzBC,KAAK,CAAE,YAFkB,CAGzBC,OAAO,CAAE,oBAHgB,CAA3B,CADM,CAAR,CAQMG,WATD,2FASe,4KACKhB,CAAAA,KAAK,CAC1B,iEAD0B,CAE1B,CACEiB,MAAM,CAAE,KADV,CAEEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBZ,KAAK,CAAEO,IAAI,CAACP,KADK,CAEjBC,aAAa,CAAEM,IAAI,CAACN,aAFH,CAAf,CAFR,CAF0B,CADV,QACZR,QADY,mBAYbA,QAAQ,CAACC,EAZI,+BAaV,IAAIC,CAAAA,KAAJ,CAAU,2BAAV,CAbU,yDATf,kBASCa,CAAAA,WATD,oFA2BGA,CAAAA,WAAW,EA3Bd,QA4BHlB,QAAQ,CACNH,SAAS,CAACe,gBAAV,CAA2B,CACzBC,MAAM,CAAE,SADiB,CAEzBC,KAAK,CAAE,UAFkB,CAGzBC,OAAO,CAAE,6BAHgB,CAA3B,CADM,CAAR,CA5BG,mFAoCHf,QAAQ,CACNH,SAAS,CAACe,gBAAV,CAA2B,CACzBC,MAAM,CAAE,OADiB,CAEzBC,KAAK,CAAE,QAFkB,CAGzBC,OAAO,CAAE,2BAHgB,CAA3B,CADM,CAAR,CApCG,sEAAP,iEA6CD,CA9CM","sourcesContent":["import { uiActions } from './ui-slice';\r\nimport { cartActions } from './cart-slice';\r\n\r\nexport const fetchCartData = () => {\r\n  return async (dispatch) => {\r\n    const fetchData = async () => {\r\n      const response = await fetch(\r\n        'https://react-http2-d8099-default-rtdb.firebaseio.com/cart.json'\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Could not fetch cart data!');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      return data;\r\n    };\r\n\r\n    try {\r\n      const cartData = await fetchData();\r\n        dispatch(cartActions.replaceCart({\r\n            items: cartData.items || [],\r\n            totalQuantity: cartData.totalQuantity\r\n        }));\r\n    } catch (error) {\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          status: 'error',\r\n          title: 'Error!',\r\n          message: 'Fetching cart data failed!',\r\n        })\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nexport const sendCartData = (cart) => {\r\n  return async (dispatch) => {\r\n    dispatch(\r\n      uiActions.showNotification({\r\n        status: 'pending',\r\n        title: 'Sending...',\r\n        message: 'Sending cart data!',\r\n      })\r\n    );\r\n\r\n    const sendRequest = async () => {\r\n      const response = await fetch(\r\n        'https://react-http2-d8099-default-rtdb.firebaseio.com/cart.json',\r\n        {\r\n          method: 'PUT',\r\n          body: JSON.stringify({\r\n              items: cart.items,\r\n              totalQuantity: cart.totalQuantity\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Sending cart data failed.');\r\n      }\r\n    };\r\n\r\n    try {\r\n      await sendRequest();\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          status: 'success',\r\n          title: 'Success!',\r\n          message: 'Sent cart data successfully',\r\n        })\r\n      );\r\n    } catch (error) {\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          status: 'error',\r\n          title: 'Error!',\r\n          message: 'Senting cart data failed!',\r\n        })\r\n      );\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}